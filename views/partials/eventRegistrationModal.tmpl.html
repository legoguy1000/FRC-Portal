<md-dialog aria-label="Event Registration" style="" flex="30" >
		<form layout="column" style="width:100%;" name="vm.registrationForm1" ng-submit="vm.registerForEvent()">
			<md-toolbar layout="row">
			  <div class="md-toolbar-tools">
				<h2>Register for {{vm.event.name}} - {{vm.userInfo.full_name}}</h2>
				<span flex></span>
				<md-button class="md-icon-button noprint" ng-click="vm.cancel()">
				  <md-icon class=""> close </md-icon>
				</md-button>
			  </div>
			</md-toolbar>
			<md-progress-linear md-mode="indeterminate" ng-show="vm.loading"></md-progress-linear>
			<md-dialog-content class="md-margin" layout="column" flex layout-align="center space-between">
				<v-accordion class="vAccordion--default">
				  <!-- add expanded attribute to open the section -->
				  <v-pane expanded>
				    <v-pane-header>
				      Registration
				    </v-pane-header>
				    <v-pane-content layout="column">
							<div layout="row" flex layout-align="space-between center">
								<div>Are you attending the event? </div>
								<md-select ng-model="vm.registrationForm.registration" placeholder="" class="md-no-underline" required>
				          <md-option ng-value="true">Yes</md-option>
				          <md-option ng-value="false">No</md-option>
				        </md-select>
							</div>
				    </v-pane-content>
				  </v-pane>
				  <v-pane ng-disabled="!vm.registrationForm.registration" ng-if="vm.event.time_slots_required">
				    <v-pane-header>
				      Hours of Availability
				    </v-pane-header>
				    <v-pane-content layout="column">
							<div layout="row" flex layout-align="space-between center">
								<md-button type="button" class="md-raised md-primary" ng-click="vm.showTimeSlotListModal($event)">
									Select Time Slots
								</md-button>
								<div layout="column">
									<div layout="row" layout-align="center center"><b>My Time Slots</b></div>
									<div ng-repeat="time_slot in vm.registrationForm.event_time_slots" layout="row" layout-align="space-between center">
										<div style="margin-right: 10px;">{{time_slot.name}}: </div>
										<div> {{time_slot.date.event_start_formatted}} - {{time_slot.date.event_end_formatted}}</div>
									</div>
								</div>
							</div>
				    </v-pane-content>
				  </v-pane>
				  <v-pane ng-disabled="!vm.registrationForm.registration" ng-if="vm.event.drivers_required && vm.userInfo.user_type=='Mentor'">
				    <v-pane-header>
				      Driving
				    </v-pane-header>
				    <v-pane-content>
							<div layout="column" flex >
								<div layout="row" flex layout-align="space-between center">
									<div>Can you drive? </div>
									<md-select ng-model="vm.registrationForm.can_drive" placeholder="" class="md-no-underline" ng-required="vm.event.drivers_required && main.userInfo.user_type=='Mentor' && vm.registrationForm.registration">
					          <md-option ng-value="true">Yes</md-option>
					          <md-option ng-value="false">No</md-option>
					        </md-select>
								</div>
								<div layout="row" flex layout-align="space-between center" ng-show="vm.registrationForm.can_drive">
									<div>How many including yourself can you drive? </div>
									<md-select ng-model="vm.registrationForm.event_cars.car_space" placeholder="" class="md-no-underline" ng-required="vm.registrationForm.can_drive">
					          <md-option ng-value="{{n}}" ng-repeat="n in vm.range(0,10)">{{n}}</md-option>
					        </md-select>
								</div>
							</div>
				    </v-pane-content>
				  </v-pane>
				  <v-pane ng-disabled="!vm.registrationForm.registration" ng-if="vm.event.room_required && vm.userInfo.user_type != 'Mentor'">
				    <v-pane-header>
				      Please Select Hotel Room
				    </v-pane-header>
				    <v-pane-content>
							<div layout="row" ng-repeat="room in vm.room_list.rooms" style="border-top: solid;border-left: solid;border-right: solid;" ng-class="{'lastRowStyle': !vm.admin && $last}">
								<div flex layout="row" layout-align="start center" class="" style="border-right: solid;">
									<md-button class="md-icon-button noprint" ng-click="vm.deleteEventRoom(room.room_id)" ng-hide="!vm.admin">
										<md-tooltip md-direction="top">Delete Room</md-tooltip>
										<md-icon class=""> close </md-icon>
									</md-button>
									<span>{{room.room_title}}</span>
								</div>
								<div flex class="dndList">
									<md-list ng-cloak
										dnd-list="vm.room_list.room_selection[room.room_id]"
										dnd-allowed-types="room.room_type"
										dnd-disable-if="!vm.admin || (room.user_type == 'Student' && vm.room_list.room_selection[room.room_id].length >= 4) || (room.user_type == 'Mentor' && vm.room_list.room_selection[room.room_id].length >= 2)"
										style="min-height:20px;">
											<md-list-item ng-repeat="req in vm.room_list.room_selection[room.room_id]"
													dnd-draggable="req"
													dnd-moved="vm.room_list.room_selection[room.room_id].splice($index, 1)"
													dnd-effect-allowed="move"
													dnd-selected="models.selected = req"
													ng-class="{'selected': models.selected === req}"
													dnd-type="req.user.room_type"
													class="min-height-reset"
													dnd-disable-if = "!vm.admin"
													>
													<dnd-nodrag layout="row" layout-align="start center">
														<div dnd-handle style="cursor: move;margin-right:10px;" class="noprint" ng-hide="!vm.admin">:::</div>
														<div>{{req.user.full_name}}</div>
														<div ng-hide="req.registration" style="cursor: default; margin-left: 5px;">
															<md-tooltip md-direction="top">User has not completed registration</md-tooltip>
															<md-icon class="material-icons md-warn">warning</md-icon>
														</div>
												</dnd-nodrag>
											</md-list-item>
									</md-list>
									<div flex></div>
									<div ng-show="!vm.admin && !vm.checkReg(room.room_id) && vm.userInfo.user_type == 'Student' && vm.room_list.room_selection[room.room_id].length < 4 && room.gender == vm.userInfo.gender && room.user_type == vm.userInfo.user_type" layout="row" layout-align="center center">
										<md-button type="button" ng-click="vm.toggleRoomSelect(room.room_id)">
											<md-tooltip md-direction="top">Select Room</md-tooltip>
											<span>Select Room</span>
										</md-button>
									</div>
								</div>
							</div>



				    </v-pane-content>
				  </v-pane>
				  <v-pane ng-disabled="!vm.registrationForm.registration">
				    <v-pane-header>
				      Final Comments
				    </v-pane-header>
				    <v-pane-content>
							<div layout="row" flex layout-align="start center">
								<md-input-container class="" style="width:99%;">
				          <label>Comments</label>
				          <textarea ng-model="vm.registrationForm.comments" rows="5" md-select-on-focus></textarea>
				        </md-input-container>
							</div>
				    </v-pane-content>
				  </v-pane>
				</v-accordion>
			</md-dialog-content>
			<md-dialog-actions layout="row" class="noprint">
				<span flex></span>
				<md-button type="submit" class="md-raised md-primary">
					Submit
				</md-button>
			</md-dialog-actions>
		</form>
</md-dialog>
